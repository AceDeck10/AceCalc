<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Austine D. Odhiambo">

        <link rel="stylesheet" href="calc.css">
        <title>Calculator</title>
        <script>
            // A function to get value into the textfield
            var cvalue;
            
            //Calc Functions
            function calcClear(){
                document.getElementById("inpt").value = "";
            }
            function calcBksp(){
                var cvalue = document.getElementById("inpt").value;
                lvalue = cvalue.substring(0,cvalue.length - 1);
                //alert(lvalue);
                document.getElementById("inpt").value = lvalue;
            }
            function addPlusMinus(){
                var cvalue = document.getElementById("inpt").value;
                var sign = cvalue.substr(0,1);
                var nval = cvalue.substr(1);
                //alert(sign);
                //alert(nval);
                if(sign == "+"){
                    cvalue = "-" + nval;
                }
                else if(sign == "-"){
                    cvalue = "+" + nval;
                }
                else{
                    cvalue = "+" + cvalue;
                }
                document.getElementById("inpt").value = cvalue;
            }

            //Operators Functions
            function addMinus(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue + document.getElementById("min").value;
                document.getElementById("inpt").value = cvalue;
                //alert(cvalue);
            }
            function addPlus(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue + document.getElementById("pl").value;
                document.getElementById("inpt").value = cvalue;
                //alert(cvalue);
            }

            function addDivide(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue + document.getElementById("dvd").value;
                document.getElementById("inpt").value = cvalue;
                //alert(cvalue);
            }

            function addTimes(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue + document.getElementById("tm").value;
                document.getElementById("inpt").value = cvalue;
                //alert(cvalue);
            }

            //Operand Functions
            function addOne(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue + document.getElementById("one").value;
                document.getElementById("inpt").value = cvalue;
            }
            function addTwo(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue + document.getElementById("two").value;
                document.getElementById("inpt").value = cvalue;
            }
            function addThree(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue + document.getElementById("th").value;
                document.getElementById("inpt").value = cvalue;
            }
            function addFour(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue+document.getElementById("fr").value;
                document.getElementById("inpt").value = cvalue;
            }
            function addFive(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue + document.getElementById("fv").value;
                document.getElementById("inpt").value = cvalue;
            }
            function addSix(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue  +document.getElementById("six").value;
                document.getElementById("inpt").value = cvalue;
            }
            function addSeven(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue + document.getElementById("sv").value;
                document.getElementById("inpt").value = cvalue;
            }
            function addEight(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue + document.getElementById("et").value;
                document.getElementById("inpt").value = cvalue;
            }
            function addNine(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue + document.getElementById("nn").value;
                document.getElementById("inpt").value = cvalue;
            }
            function addZero(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue + document.getElementById("ze").value;
                document.getElementById("inpt").value = cvalue;
            }
            function addDot(){
                var svalue = document.getElementById("inpt").value;
                cvalue = svalue + document.getElementById("dot").value;
                document.getElementById("inpt").value = cvalue;
            }
            
            //Evaluation function
            function evaluateExpression(){
                var chars = cvalue.split("");
                var n = [];
                var op = [];
                var index = 0;
                var oplast = true;
                n[index] = "";
                
                //parse expression
                for (var i = 0; i < chars.length; i++) {
                    if (isNaN(parseInt(chars[i])) && chars[i] !== "." && !oplast) {
                        op[index] = chars[i];
                        index++;
                        n[index] = "";
                        oplast = true;
                    } else {
                        n[index] += chars[i];
                        oplast = false;
                    }
                }
                // Calculate the expression
                cvalue = parseFloat(n[0]);
                for (var j = 0; j < op.length; j++) {
                    var num = parseFloat(n[j + 1]);
                    var addition = document.getElementById("pl").value;
                    var subtraction = document.getElementById("min").value;
                    var division = document.getElementById("dvd").value;
                    var multiplication = document.getElementById("tm").value;
                    switch (op[j]) {
                        case addition:
                            cvalue = cvalue + num;
                            break;
                        case subtraction:
                            cvalue = cvalue - num;
                            break;
                        case multiplication:
                            cvalue = cvalue * num;
                            break;
                        case division:
                            cvalue = cvalue / num;
                            break;
                    }
                }
                document.getElementById("inpt").value = cvalue;
            }
        </script>
    </head>
    <body>
        <table>
            <form name='calc' id='calc' style='width:100%'>
                <tr style='font-size:16px;background:black;color:white'>
                    <th colspan=5></th>
                </tr>
                <tr style='font-size:0.75rem;background:black;color:white'>
                    <th></th>
                </tr>
                <tr><th colspan=4><input type=text name=inpt id=inpt style='width:95%'></th></tr>
                <tr>
                    <th><input type=button name=bksp id=bksp value='&larr;' onClick='calcBksp();'></th>
                    <th><input type=button name=ce id=ce value='CE' ></th>
                    <th><input type=button name=clr id=clr value='Clr' onClick='calcClear();'></th>
                    <th><input type=button name=dvd id=dvd value='&divide;' onclick="addDivide()"></th>
                </tr>
                <tr>
                    <th><input type=button name=sv id=sv value='7' onClick='addSeven();'></th>
                    <th><input type=button name=et id=et value='8' onClick='addEight();'></th>
                    <th><input type=button name=nn id=nn value='9' onClick='addNine();'></th>
                    <th><input type=button name=tm id=tm value='&times;' onclick='addTimes()'></th>
                </tr>
                <tr>
                    <th><input type=button name=sv id=fr value='4' onClick='addFour();'></th>
                    <th><input type=button name=fv id=fv value='5' onClick='addFive();'></th>
                    <th><input type=button name=six id=six value='6' onClick='addSix();'></th>
                    <th><input type=button name=min id=min value='&minus;' onclick="addMinus()"></th>
                </tr>
                <tr>
                    <th><input type=button name=one id=one value='1' onClick='addOne();'></th>
                    <th><input type=button name=two id=two value='2' onClick='addTwo();'></th>
                    <th><input type=button name=th id=th value='3' onClick='addThree();'></th>
                    <th><input type=button name=pl id=pl value='&plus;' onclick="addPlus()"></th>
                </tr>
                <tr>
                    <th><input type=button name=pm id=pm value='&plusmn'onClick='addPlusMinus();'></th>
                    <th><input type=button name=ze id=ze value='0' onClick='addZero();'></th>
                    <th><input type=button name=dot id=dot value='.' onClick='addDot();'></th>
                    <th><input type=button name=eq id=eq value='&equals;' onclick="evaluateExpression()"></th>
                </tr>
            </form>
        </table>
    </body>
</html>